<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mt.agent.repository.value.mapper.ValueRecommendRelationMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.mt.agent.repository.value.entity.ValueRecommendRelation">
        <id column="id" property="id" />
        <result column="question_id" property="questionId" />
        <result column="recommend_id" property="recommendId" />
        <result column="score" property="score" />
    </resultMap>
    <select id="getRecommendQuestionList" resultType="com.mt.agent.repository.value.entity.ValueQuestionDetail">
        SELECT 
            vr.recommend_id as questionId,
            vr.score as score,
            vqd.question_name as questionName,
            vqd.question_template as questionTemplate
        FROM value_recommend_relation vr
        LEFT JOIN value_question_detail vqd ON vr.recommend_id = vqd.question_id
        WHERE vr.question_id = #{questionId}
        ORDER BY vr.score DESC
    </select>

</mapper>
